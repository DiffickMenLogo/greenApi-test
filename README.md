Локальное развертывание проекта
-------------------------------

Эта инструкция поможет вам настроить и запустить проект локально на вашем компьютере. Проект состоит из двух микросервисов: М1 (обработка HTTP запросов) и М2 (обработка заданий из RabbitMQ).

### Требования

Перед началом убедитесь, что у вас установлены следующие компоненты:

1.  [Node.js](https://nodejs.org/) - версия 12 или выше
2.  [RabbitMQ](https://www.rabbitmq.com/) - установите RabbitMQ или используйте установленный инстанс

### Установка

1.  Клонируйте репозиторий проекта:

``git clone https://github.com/your-username/your-repository.git``

1.  Перейдите в папку проекта:

`cd your-repository`

1.  Установите зависимости для обоих микросервисов М1 и М2:

`npm install`

### Настройка

1.  Убедитесь, что RabbitMQ запущен и доступен по адресу `amqp://localhost` на порту 5672. Если RabbitMQ запущен на другом сервере или использует другой порт, отредактируйте соответствующую часть кода в файлах `M1/index.js` и `M2/worker.js`.

### Запуск

1.  Запустите микросервис М1 (обработка HTTP запросов):

`cd .\src\M1\`

`node index.js`

1.  Запустите микросервис М2 (обработка заданий из RabbitMQ):

`cd .\src\M2\`

`node worker.js`

### Проверка

Теперь оба микросервиса М1 и М2 должны быть запущены и работать. Микросервис М1 будет слушать входящие HTTP запросы на порту 4001. Вы можете отправлять HTTP POST запросы на `http://localhost:4001/process`, чтобы проверить функционирование М1.

Микросервис М2 будет подключаться к очереди RabbitMQ, получать задания и обрабатывать их. При успешной обработке задания результаты будут помещены в другую очередь RabbitMQ.

### Завершение работы

Чтобы остановить микросервисы, используйте сочетание клавиш `Ctrl+C` в терминале, где они были запущены.

Заключение
----------

Поздравляю! Вы успешно развернули проект с микросервисами М1 и М2 локально на своем компьютере. Теперь вы можете использовать этот проект в качестве отправной точки для разработки и тестирования более сложных систем на основе Node.js и RabbitMQ.

Тестирование Микросервиса М1:
-----------------------------

1.  Тест на успешную обработку HTTP запроса:

    -   Отправьте HTTP POST запрос на `http://localhost:3000/process` с валидными тестовыми данными.
    -   Проверьте, что микросервис М1 корректно обработал запрос, отправил задание в RabbitMQ и вернул HTTP-ответ со статусом 200.
2.  Тест на ошибку при отправке задания в RabbitMQ:

    -   Отключите RabbitMQ, чтобы микросервис М1 не мог отправить задание в очередь.
    -   Отправьте HTTP POST запрос на `http://localhost:3000/process`.
    -   Проверьте, что микросервис М1 обработал ошибку и вернул HTTP-ответ со статусом 500 с сообщением об ошибке.

Тестирование Микросервиса М2:
-----------------------------

1.  Тест на успешную обработку задания из RabbitMQ:

    -   Запустите микросервис М1 и М2.
    -   Отправьте HTTP POST запрос на `http://localhost:3000/process` с тестовыми данными.
    -   Проверьте, что микросервис М1 успешно отправил задание в RabbitMQ.
    -   Проверьте, что микросервис М2 успешно обработал задание из очереди RabbitMQ и поместил результат в другую очередь.
    -   Проверьте, что микросервис М1 получил результат из очереди `result_queue` и вернул его в HTTP-ответе.
2.  Тест на ошибку при обработке задания:

    -   Запустите микросервис М1 и М2.
    -   Отправьте HTTP POST запрос на `http://localhost:3000/process` с тестовыми данными, которые приведут к ошибке при обработке в микросервисе М2.
    -   Проверьте, что микросервис М1 успешно отправил задание в RabbitMQ.
    -   Проверьте, что микросервис М2 обработал задание из очереди RabbitMQ, но столкнулся с ошибкой.
    -   Проверьте, что микросервис М1 перехватил ошибку, залогировал её и вернул HTTP-ответ со статусом 500 с сообщением об ошибке.